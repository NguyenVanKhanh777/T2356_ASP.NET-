@{
    ViewBag.Title = "The Book Shop";
    Layout = "~/Views/Shared/_Layout.cshtml";
    var newbook = (List<BookShop.Models.EF.Book>)ViewBag.NewBook;
    var bookFuture = (List<BookShop.Models.EF.Book>)ViewBag.BookFuture;
    var bookView = (List<BookShop.Models.EF.Book>)ViewBag.BookView;
    var cateView = (List<BookShop.Models.EF.Category>)ViewBag.ViewCategory;
}

<div id="maincontent" class="col-xs-12 col-sm-8 col-md-9">
    <div class="boxmain spmoi">
        <div class="tit-boxmain">
            <h3><span>Sản phẩm mới</span></h3>
        </div>

        <div class="ct-boxmain">
            <div class="row">
                <div id="spmoi" class="owl-carousel">
                    @foreach (var item in newbook)
                    {
                        var url = "/chi-tiet/" + item.MetaTitle + "-" + item.ID;
                        int sale = 0; // Giá trị mặc định nếu Price hoặc PromotionPrice là null
                        if (item.PromotionPrice.HasValue && item.PromotionPrice.Value != 0 && item.Price.HasValue)
                        {
                            sale = (int)((1 - item.Price.Value / item.PromotionPrice.Value) * 100);
                        }
                        <div class="item">
                            <div class="boxsp">
                                <div class="imgsp">
                                    <a href="@url"><img class="imgproduct" src="@item.Image" style="width:196px;height:300px;"></a>
                                    <div class="img-label">
                                        <div class="col-xs-4 p0">
                                            <span class="salePrice">-@sale %</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="namesp">
                                    <a href="@url" title="@item.Name">@item.Name</a>
                                </div>
                                <div class="Tac-Gia" style="text-align:center;"><a href="#">@item.Author</a></div>
                                <div class="prices" style="text-align:center">@(item.Price.HasValue ? item.Price.Value.ToString("N0") : "Giá liên hệ") ₫</div>
                                <div class="rootPrinces" style="text-align:center">@(item.PromotionPrice.HasValue ? item.PromotionPrice.Value.ToString("N0") : "Giá gốc") ₫</div>
                                <div class="button-hd">
                                    <a href="/them-gio-hang?BookID=@item.ID&quantity=1"><i class="fa fa-shopping-cart" aria-hidden="true"></i></a>
                                    <a href="@url"><i class="fa fa-eye" aria-hidden="true"></i></a>
                                </div>
                            </div>
                        </div>
                    }
                </div>
            </div>
        </div>
    </div>

    <div class="boxmain">
        <div class="tit-boxmain">
            <h3><span>Sắp phát hành</span></h3>
        </div>
        <div class="ct-boxmain row m0">
            @foreach (var item in bookFuture)
            {
                var url = "/sap-phat-hanh/" + item.MetaTitle + "-" + item.ID;
                int sale = 0; // Giá trị mặc định nếu Price hoặc PromotionPrice là null
                if (item.PromotionPrice.HasValue && item.PromotionPrice.Value != 0 && item.Price.HasValue)
                {
                    sale = (int)((1 - item.Price.Value / item.PromotionPrice.Value) * 100);
                }
                <div class="col-xs-6 col-sm-4 col-md-3 p5">
                    <div class="boxsp">
                        <div class="imgsp">
                            <a href="@url"><img class="imgproduct" src="@item.Image" style="width:180px; height:258px;"></a>
                            <div class="img-label">
                                <img src="~/Assets/Client/images/new.png">
                                <div class="col-xs-4 p0">
                                    <span class="salePrice" style="margin-right:-35px; margin-top:2px;">-@sale %</span>
                                </div>
                            </div>
                        </div>
                        <div class="namesp">
                            <a href="@url" title="@item.Name">@item.Name</a>
                        </div>
                        <div class="Tac-Gia" style="text-align:center;"><a href="#">@item.Author</a></div>
                        <div class="prices" style="text-align:center">@(item.Price.HasValue ? item.Price.Value.ToString("N0") : "Giá liên hệ") ₫</div>
                        <div class="rootPrinces" style="text-align:center">@(item.PromotionPrice.HasValue ? item.PromotionPrice.Value.ToString("N0") : "Giá gốc") ₫</div>
                        <div class="button-hd">
                            <a href="/them-gio-hang?BookID=@item.ID&quantity=1"><i class="fa fa-shopping-cart" aria-hidden="true"></i></a>
                            <a href="@url"><i class="fa fa-eye" aria-hidden="true"></i></a>
                        </div>
                    </div>
                </div>
            }
        </div>
    </div>
    <div class="boxmain">
        <div class="tit-boxmain">
            <h3><span>Sách bán chạy</span></h3>
        </div>
        <div class="ct-boxmain row m0">
            @foreach (var item in bookView)
            {
                var url = "/chi-tiet/" + item.MetaTitle + "-" + item.ID;
                int sale = 0; // Giá trị mặc định nếu Price hoặc PromotionPrice là null
                if (item.PromotionPrice.HasValue && item.PromotionPrice.Value != 0 && item.Price.HasValue)
                {
                    sale = (int)((1 - item.Price.Value / item.PromotionPrice.Value) * 100);
                }
                <div class="col-xs-6 col-sm-4 col-md-3 p5">
                    <div class="boxsp">
                        <div class="imgsp">
                            <a href="@url"><img class="imgproduct" src="@item.Image" style="width:180px; height:258px;"></a>
                            <div class="img-label">
                                <img src="/Assets/Client/images/hot.png">
                                <div class="col-xs-4 p0">
                                    <span class="salePrice" style="margin-right:-35px; margin-top:2px;">-@sale %</span>
                                </div>
                            </div>
                        </div>
                        <div class="namesp">
                            <a href="@url" title="@item.Name">@item.Name</a>
                        </div>
                        <div class="Tac-Gia" style="text-align:center;"><a href="#">@item.Author</a></div>
                        <div class="prices" style="text-align:center">@(item.Price.HasValue ? item.Price.Value.ToString("N0") : "Giá liên hệ") ₫</div>
                        <div class="rootPrinces" style="text-align:center">@(item.PromotionPrice.HasValue ? item.PromotionPrice.Value.ToString("N0") : "Giá gốc") ₫</div>
                        <div class="button-hd">
                            <a href="/them-gio-hang?BookID=@item.ID&quantity=1"><i class="fa fa-shopping-cart" aria-hidden="true"></i></a>
                            <a href="@url"><i class="fa fa-eye" aria-hidden="true"></i></a>
                        </div>
                    </div>
                </div>
            }
        </div>
